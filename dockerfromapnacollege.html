<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Docker Information</title>
  </head>
  <body>
    <a href="https://www.docker.com" target="_blank"
      >Go to Docker - Download Docker Desktop</a
    >
    <a href="https://hub.docker.com" target="_blank" style="display: block"
      >Go to Docker Hub - Docker Hub</a
    >

    <strong>Docker Command</strong>
    <p>
      <strong>docker pull image_name</strong> (Download an image from Docker
      Hub)<br />
      <strong>docker images</strong> (List all downloaded images)<br />
      <strong>docker ps</strong> (Show running containers)<br />
      <strong>docker ps -a</strong> (Show all containers (even stopped))<br />
      <strong>docker run image_name</strong> (Run a container )(Build Container
      from docker image)<br /><br />
      <strong>docker run -it image_name</strong> (Run a container )(Build
      Container from docker image) - <br />here -it stan for interactive mode -
      means it will run the container in interactive mode. <br />interactive
      mode means it will allow you to run commands inside the container. -> its
      enter inside that container and we can run command inside and work with
      them.<br />
      for example check folderes using ls command. also we can create directory
      inside the container.<br />
      used exit command to exit from the container.<br />
      when we exit our container will be stopped <br /><br />

      <strong>docker run -d image_name</strong> (Run a container in detached
      mode) - dettach mode means it will run the container in background. by
      default it all other container run in attached mode, using -d command we
      can run container in detached mode.<br />

      <strong>docker run -d -e MYSQL_ROOT_PASSWORD=1234 image_name</strong> (Run
      a container in detached mode and set environment variable
      MYSQL_ROOT_PASSWORD to 1234)<br /><br />

      <strong
        >docker run -d -e MYSQL_ROOT_PASSWORD=1234 --name mynewName-mysql
        image_name</strong
      >
      (Run a container in detached mode and set environment variable
      MYSQL_ROOT_PASSWORD to 1234 and name the container mynewName-mysql) using
      --name we can set custom name to the container<br /><br />

      we can run multiple container at the same time.<br />

      <strong>docker start container_id / container_name</strong> (Start a
      stopped container)<br />
      <strong>docker stop container_id / container_name</strong> (Stop a running
      container)<br />
      <strong>docker rm container_id / container_name</strong> (Remove a
      container)<br />
      <strong>docker rmi image_id</strong> (Remove an image)<br />
      <strong>docker exec -it container_id bash</strong> (Enter inside a running
      container)<br />
      <br /><br />
      <strong
        >we can create container using
        <span style="color: red">run</span> command.<br />
        we can start container using
        <span style="color: red">start</span> command.<br />
        we can stop container using
        <span style="color: red">stop</span> command.<br />
        we can remove container using
        <span style="color: red"> rm </span>command.<br />
        we can remove image using
        <span style="color: red">rmi </span>command.<br />
        we can enter inside container using
        <span style="color: red"> exec</span> command.
      </strong>

      <br /><br />
      <strong>How to download specific version of mysql</strong> <br />

      <strong>docker pull mysql:5.7</strong> (Download MySQL 5.7 image)<br />
      <strong>docker pull mysql:8.0</strong> (Download MySQL 8.0 image)<br />
      <strong>docker pull mysql:latest</strong> (Download the latest MySQL
      image) if we not pass any version by default its latest<br />
      we can download multiple mysql with different versions.<br />

      <br /><br />
      <strong>Docker image Layer </strong> <br />
      Docker image is a collection of layers. <br />
      Each layer represents a single change to the image.<br />

      Layers in this flow -> Base Layer - base layer is based on linux -> Layer
      1 -> Layer 2 -> Container Layer.<br />
      here container layer we can chnaged only other layers are unchanged
      <br /><br />

      <strong>Port Binding</strong> <br />
      Port binding is a way to map a port on the host to a port on the
      container. It allows you to access the container from outside the host.<br />

      <strong>docker run -d -p 80:80 image_name</strong> (Run a container in
      detached mode and map port 80 of the container to port 80 of the host)<br />
      <strong>docker run -d -p 80:80 -p 443:443 image_name</strong> (Run a
      container in detached mode and map port 80 and 443 of the container to
      port 80 and 443 of the host)<br /><br />

      <strong>docker run -d -p 80:80 -p 443:443 -p 3306:3306 image_name</strong>
      (Run a container in detached mode and map port 80, 443 and 3306 of the
      container to port 80, 443 and 3306 of the host)<br /><br />

      <strong>Troubleshoot Commands</strong> <br />
      <strong>docker logs container_id</strong> (Show logs of a container to
      check error log)<br />
      <strong>docker inspect container_id</strong> (Show details of a container)
      <br />
      <strong>docker exec -it container_id /bin/bash</strong> (Enter inside a
      running container)<br />
      <strong>docker exec -it containeer_id /bin/sh</strong>
      <br /><br />

      <strong>difference between Docker vs virtual machine</strong> <br />

      Docker is a lightweight and portable environment for running applications,
      while virtual machines provide a full-fledged operating system
      environment.

      <br /><br />

      <strong>Developing with Docker</strong> <br />
      download this demo prject of node to learn docker <br />

      <a
        href="https://github.com/shradha-khapra/docker-testapp.git"
        target="_blank"
        >https://github.com/shradha-khapra/docker-testapp.git</a
      >

      <br />in this project used Mongodb databse and mongo-express<br />
      there are 2 image - mongo and mongo-express<br />

      we need to connect mongo db to mongo express using docker network to
      interaction between them.<br />

      in this project there are 2 container - mongo and mongo-express
      <strong>setting up mongo & mongo-express</strong>
      <a
        href="https://hub.docker.com/_/mongo"
        target="_blank"
        style="display: block"
        >to setup mongo follow intruction here</a
      >
      <a
        href="https://hub.docker.com/_/mongo-express"
        target="_blank"
        style="display: block"
        >to setup mongo-express follow intruction here</a
      >
      <br />
      we need some setup : itns need to run with -d command to run in detached
      mode. we need to connec/bind host port to container port.its connect using
      -p command<br />
      we need some environment variable to connect mongo db to mongo express.its
      connect using -e command.
      <br />
      final command is - docker run -d -p 27017:27017 --name mongo --network
      mongo-network -e MONGO_INITDB_ROOT_USERNAME=admin -e
      MONGO_INITDB_ROOT_PASSWORD=qwerty mongo <br />
      <br />
      run first container mongo <br />
      <strong
        >docker run -d -p 27017:27017 --name mongo --network mongo-network -e
        MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=qwerty
        mongo</strong
      >
      ite automaticaly find and download images that required to run this
      container.<br />

      <br />
      now run second container mongo-express<br />
      mongo express is a web interface for mongo db.<br />

      this way used perfactly
      <strong>
        docker run -d -p 8081:8081 --name mongo-express --network mongo-network
        -e ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e
        ME_CONFIG_MONGODB_ADMINPASSWORD=qwerty -e
        ME_CONFIG_MONGODB_URL="mongodb://admin:qwerty@mongo:27017" mongo-express
      </strong>

      <br />
      docker run -d -p 8081:8081 --name mongo-express --network mongo-network -e
      ME_CONFIG_MONGODB_ADMINUSERNAME=admin -e
      ME_CONFIG_MONGODB_ADMINPASSWORD=qwerty -e
      ME_CONFIG_MONGODB_URL="mongodb://admin:qwerty@mongo:27017" mongo-express
      <br />

      now 2 container running done.<br />

      now open http://localhost:8081 in browser. <br />
      enter UserName - admin and password - pass<br />
      press enter/ sign in - we enter in mongo express. this is interface that
      help us to connect mongo db. <br />
      <br />

      now create database in mongo express <br />
      click on database - create database - enter database name - click on
      create
      <br />
      <strong
        >enter database name -> apnacollege-db -> click create database
        button</strong
      ><br />
      <strong
        >Now Create New Collection -> users -> click create collection
        button</strong
      >
      <br />
      <strong
        >Now Add New Document -> { "_id": ObjectId(), "email":"jane@yahoo.in",
        "username":"jane Doe", "password":"secret" } -> click save -> using this
        flow enter one records</strong
      ><br />

      <strong>befor getUsers call need start server.js</strong>
      <br />

      D:\learn website\ApnaCollageProjects\Github Cheat
      Sheet\dockertestapp\docker-testapp>node server.js
      <br />server running on port 5050 <br />
      Connected successfully to server
      <br />

      <strong
        >now check our database is connect with node js project/application. we
        can call get request using this way -> localhost:5050/getUsers -> in
        browser we see our records from database</strong
      >

      <br /><br />so first create docker network <br />
      docker network create mongo-network<br />

      now connect mongo db to mongo express <br />
      docker network connect mongo-network mongo-express<br />

      <br /><br />
      download this project and without install node and mongo db we can set and
      run this prokject using docker.

      <br /><br />
      <strong>Docker Network</strong> <br />
      is a virtual network that allows containers to communicate with each
      other.<br /><br />

      <strong>Commands</strong> <br />

      docker network ls - used this command to list all network<br /><br />
      docker network create NETWORK_NAME<br /><br />
      docker network rm NETWORK_NAME<br /><br />
      docker network connect NETWORK_NAME CONTAINER_NAME<br /><br />
      docker network disconnect NETWORK_NAME CONTAINER_NAME<br /><br />

      <br /><br />

      <strong>Docker Compose</strong> Docker Compose is a tool for defining and
      running multi-container applications.
      <br />
      Docker compose is better way to run docker containers. here we need create
      .yaml file. that file contain all container details and commands to
      run.<br />
      <br />cmd command write inside yaml file like this way: <br />
      version: "3.8" -> this is docker compose version/ this is optional<br />
      services: <br />
      mongo: <br />
      image: mongo <br />
      ports: <br />
      - "27017:27017" <br />
      environment: <br />
      - MONGO_INITDB_ROOT_USERNAME=admin <br />
      - MONGO_INITDB_ROOT_PASSWORD=qwerty <br />
      networks: <br />
      - mongo-network <br />
      <br /><br />

      mongo-express: <br />
      image: mongo-express <br />
      ports: <br />
      - "8081:8081" <br />
      networks: <br />
      - mongo-network <br />
      environment: <br />
      - ME_CONFIG_MONGODB_ADMINUSERNAME=admin <br />
      - ME_CONFIG_MONGODB_ADMINPASSWORD=qwerty <br />
      - ME_CONFIG_MONGODB_URL=mongodb://admin:qwerty@mongo:27017 <br />
      <br />

      used for create/run docker compose file ->><strong>
        docker compose -f fileName.yaml up -d</strong
      >
      <br />
      used for remove/stop docker compose file ->><strong>
        docker compose -f fileName.yaml down</strong
      >
      <br />

      <br />command for run docker compose file <br />
      docker compose up -d <br />
      <br />
      command for stop docker compose file <br />
      docker compose down
      <br /><br />

      when we create docker file in that file we does not need to any network
      because docker compose create default network and run all container on
      default network so all file run in same network. <br />
      so in yaml file no any netwok required to create it.
      <br /><br />
      in this demo we have same process done using docker compose that done by
      command previously.
      <br />
      here <strong>mongodb.yaml</strong> file created in this project fot
      docker-compose.<br />
      <strong
        >run this command for run docker compose file same folder where
        mongodb.yaml file exist - docker compose -f mongodb.yaml up -d</strong
      >

      when we re-create container or stop container its not store data. <br />
      for data store we need to use volume.<br />
      <strong
        >for delete multiple container and that network and data we need to run
        this command - docker compose -f mongodb.yaml down</strong
      >

      <br /><br />
      <strong>Dockerizing our App</strong>
      <br />
      <strong
        >Step 1: Create a Dockerfile inside this project without any
        extension</strong
      >
      <strong>Step 2: Build the Docker Image</strong>
      <br />
      <strong>Step 3: Run the Docker Container</strong>
      <br /><br />
      visit this link for docker file
      <a
        href="https://docs.docker.com/get-started/docker-concepts/building-images/writing-a-dockerfile"
        >How to write docker file</a
      >
      <br />
      Important Dockerfile instructions:
      <br />
      FROM - specify the base image <br />
      WORKDIR - set the working directory<br />
      COPY - copy files from the host to the container <br />
      RUN - run commands in the container <br />
      CMD - set the command to run when the container starts <br />
      EXPOSE - expose a port on the container <br />
      ENV - set environment variables <br />
      <br />

      in this project we have create docker file Dockerfile -> its build using
      this command -> docker build -t testapp:1.0 .
      <br />
      after complete this commnd our image will be created and we can run
      container using this command -> docker run testapp:1.0 -> this will run
      container using this image.
      <br /><br />
      here our node server is started when we use this command or run this image
      - docker run testapp:1.0 -> because this image has node server inside it.
      <br />
      <br />

      now run our container in interative mode -> docker run -it testapp:1.0
      bash -> we are now inside this container
      <br />

      <strong
        >using docker compose now run our 3 images . mongo, mongo-express and
        our node(testapp) server.</strong
      >
      for that we need testapp image add services in our docker-compose file ->
      mongodb.yaml <br /><br />
      <strong>Publishing Images to Docker Hub</strong> <br />
      <strong>Step 1: Login to Docker Hub</strong> <br />
      <strong>Step 2: Tag the Image</strong> <br />
      <strong>Step 3: Push the Image to Docker Hub</strong>
      create docker hub account. and then login using this command -> docker
      login
      <br />
      here we got option login with authentication in the browser. this option
      used to login to docker hub in cmd.
      <br />
      now create image using this command -> docker build -t testapp:1.0 .
      <br />
      docker build -t meghanapatel7393/testapp .
      <br />
      now tag the image -> docker tag testapp:1.0 meghanapatel7393/testapp ->
      here create repository on docker hub manualy with name
      meghanapatel7393/testapp -> and create image using cmd in our project then
      push
      <br />
      now push the image to docker hub -> docker push meghanapatel7393/testapp -
      using this command our image will be pushed to docker hub
      <br />
      <br />
      now we can run our image from docker hub using this command -> docker run
      -it meghanapatel7393/testapp
      <br />
      process done and our image is pushed to docker hub.<br />
      <br />
      this way we can create docker image and push it to docker hub for public
      use.<br />
      <br />
      docker pull meghanapatel7393/testapp:latest <br />
      this way we used our images as like we started used other images.<br />

      <br /><br />
      <strong>Docker Volumes</strong>
      <br />
      Volumes are persistent storage for data inside the container. <br />
      if we want to store data inside the container we need to use volume.
      <br />

      without volume we can not store data. when we re-create container or stop
      container our data is lost so we need volume to store our data. <br />

      -v 

    </p>
  </body>
</html>
